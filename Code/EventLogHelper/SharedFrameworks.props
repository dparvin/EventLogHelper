<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!-- Define shared frameworks -->
  <PropertyGroup>
    <TargetFrameworks Condition="'$(UseReducedFrameworks)' != 'true'">net35;net452;net462;net472;net481;net8.0-windows10.0.17763.0;net9.0-windows10.0.17763.0;</TargetFrameworks>
    <TargetFrameworks Condition="'$(UseReducedFrameworks)' == 'true'">net452;net462;net472;net481;net8.0-windows10.0.17763.0;net9.0-windows10.0.17763.0;</TargetFrameworks>
  </PropertyGroup>

  <!-- Fallback values for local development only; CI can override via /p:BaseVersion /p:BuildMetadata -->
  <PropertyGroup Condition="'$(BaseVersion)' == ''">
    <BaseVersion>1.0.1</BaseVersion>
    <!-- fallback default -->
  </PropertyGroup>

  <!-- Set BuildMetadata if not already defined -->
  <PropertyGroup Condition="'$(BuildMetadata)' == ''">
    <BuildMetadata>local</BuildMetadata>
  </PropertyGroup>

  <!-- Set BuildIdentifier if not already defined -->
  <PropertyGroup Condition="'$(BuildIdentifier)' == ''">
    <BuildIdentifier></BuildIdentifier>
  </PropertyGroup>

  <!-- Set VersionRevision if not already defined -->
  <PropertyGroup>
    <VersionRevision Condition="'$(VersionRevision)' == ''"></VersionRevision>
  </PropertyGroup>

  <PropertyGroup>
    <LogVersionInfo Condition="'$(LogVersionInfo)' == ''">true</LogVersionInfo>
  </PropertyGroup>

  <PropertyGroup Condition="'$(TargetFramework)' == 'net35'">
    <DefineConstants>NET35</DefineConstants>
  </PropertyGroup>

  <PropertyGroup Condition="'$(TargetFramework)'=='net452'">
    <DefineConstants>NET452</DefineConstants>
  </PropertyGroup>

  <PropertyGroup Condition="'$(TargetFramework)'=='net452'">
    <DefineConstants>NET452</DefineConstants>
  </PropertyGroup>

  <PropertyGroup Condition="'$(TargetFramework)'=='net462'">
    <DefineConstants>NET462</DefineConstants>
  </PropertyGroup>

  <PropertyGroup Condition="'$(TargetFramework)'=='net462'">
    <DefineConstants>NET462</DefineConstants>
  </PropertyGroup>

  <PropertyGroup Condition="'$(TargetFramework)'=='net472'">
    <DefineConstants>NET472</DefineConstants>
  </PropertyGroup>

  <PropertyGroup Condition="'$(TargetFramework)'=='net472'">
    <DefineConstants>NET472</DefineConstants>
  </PropertyGroup>

  <PropertyGroup Condition="'$(TargetFramework)'=='net481'">
    <DefineConstants>NET481</DefineConstants>
  </PropertyGroup>

  <PropertyGroup Condition="'$(TargetFramework)'=='net481'">
    <DefineConstants>NET481</DefineConstants>
  </PropertyGroup>

  <PropertyGroup Condition="'$(TargetFramework)'=='net8.0-windows10.0.17763.0'">
    <DefineConstants>NET8_0</DefineConstants>
  </PropertyGroup>

  <PropertyGroup Condition="'$(TargetFramework)'=='net9.0-windows10.0.17763.0'">
    <DefineConstants>NET9_0</DefineConstants>
  </PropertyGroup>

  <!-- Define a custom target that logs from the SharedFrameworks.props file -->
  <Target Name="SharedFrameworks-LogFromSharedFrameworks" BeforeTargets="PrepareForBuild" Condition="'$(LogVersionInfo)' == 'true'">
    <Message Importance="High" Text="ðŸ“¦ SharedFrameworks.props has been imported and evaluated." />
    <Message Importance="High" Text="  âž¤ BaseVersion: $(BaseVersion)" />
    <Message Importance="High" Text="  âž¤ BuildMetadata: $(BuildMetadata)" Condition="'$(BuildMetadata)' != ''" />
    <Message Importance="High" Text="  âž¤ BuildIdentifier: $(BuildIdentifier)" Condition="'$(BuildIdentifier)' != ''" />
  </Target>

</Project>
